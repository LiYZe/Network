# http

Web 使用一种名为 HTTP（HyperText Transfer Protocol，超文本传输协议）的协议作为规范，完成从客户端到服务器端等一系列运作流程。

# URI

统一资源标识符（Uniform Resource Identifier ）

URI用字符串标识某一互联网资源

## Uniform

规定统一的格式可方便处理多种不同类型的资源，而不用根据上下文环境来识别资源指定的访问方式。

## Resource

资源的定义是“可标识的任何东西”。资源不仅可以是单一的，也可以是多数的集合体。

## Identifier

表示可标识的对象。也称为标识符。

## 格式

![image](https://user-images.githubusercontent.com/37955886/119940895-6e4c8000-bfc2-11eb-85ad-6d148175e28d.png)

# URL

统一资源定位符

URL用字符串标表示资源的地

# 请求报文

![image](https://user-images.githubusercontent.com/37955886/119941089-b4a1df00-bfc2-11eb-97ba-095375ef4399.png)

# 响应报文

![image](https://user-images.githubusercontent.com/37955886/119941139-c71c1880-bfc2-11eb-8662-b4469c4a7caa.png)

# 不保存状态

HTTP协议自身不对请求和响应之间的通信状态进行保存。对于发送过的请求或响应都不做持久化处理。

# 持久连接

持久连接：只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。

减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。

## 管线化

不用等待响应亦可直接发送下一个请求。

# 方法

GET ：获取资源

POST：传输实体主体

PUT：传输文件

HEAD：获得报文首部

DELETE：删除文件

OPTIONS：询问支持的方法

TRACE：追踪路径

CONNECT：要求用隧道协议连接代理

# Cookie

通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态。

根据服务器端发送的响应报文内的Set-Cookie首部字段信息，通知客户端保存Cookie。当下次客户端再往该服务器发送请求时，客户端会自动在请求报文中加入Cookie 值后发送。

# HTTP 报文

报文是 HTTP 通信中的基本单位，由 8 位组字节流组成，通过 HTTP 通信传输。

用于 HTTP 协议交互的信息被称为 HTTP 报文。

请求端的HTTP 报文叫做请求报文。

响应端的叫做响应报文。

## 结构

![image](https://user-images.githubusercontent.com/37955886/119941866-b9b35e00-bfc3-11eb-85f3-5dcfb6c45f57.png)

### HTTP首部字段

给浏览器和服务器提供报文主体大小、所使用的语言、认证信息等内容。

##### 4种HTTP首部字段类型

~~~bash

通用首部字段：
请求报文和响应报文两方都会使用的首部。
通过指定首部字段 Cache-Control 的指令，就能操作缓存的工作机制。
~~~

~~~bash
请求首部字段：
从客户端向服务器端发送请求报文时使用的首部。补充了请求的附加内容、客户端信息、响应内容相关优先级等信息。
~~~

~~~bash
响应首部字段：从服务器端向客户端返回响应报文时使用的首部。补充了响应的附加内容，也会要求客户端附加额外的内容信息。
~~~

~~~bash
实体首部字段：针对请求报文和响应报文的实体部分使用的首部。补充了资源内容更新时间等与实体有关的信息
~~~

### 响应报文和请求报文

![image](https://user-images.githubusercontent.com/37955886/119941919-c89a1080-bfc3-11eb-913f-36979d2c1103.png)

# 压缩

gzip（GNU zip），compress（UNIX 系统的标准压缩），deflate（zlib），identity（不进行编码）

# 分割

把实体主体分块，每一块都会用十六进制来标记块的大小，而实体主体的最后一块会使用“0(CR+LF)”来标记。

# 获取部分内容的范围请求

指定范围发送的请求，用首部字段Range来指定资源的byte范围。

# 内容协商

提供给客户端最为适合的资源，这样的机制称为内容协商（Content Negotiation）。

# 状态码

2XX：成功，响应结果表明请求被正常处理了。

3XX：重定向，表明浏览器需要执行某些特殊的处理以正确处理请求。

4XX：客户端错误，表明客户端是发生错误的原因所在。

5XX：服务器错误，表明服务器本身发生错误

# 多个域名

利用虚拟机实现搭建多个 Web 站点。

在相同的 IP 地址下，由于虚拟主机可以寄存多个不同主机名和域名的 Web 网站，因此在发送 HTTP 请求时，必须在 Host 首部内完整指定主机名或域名的 URI。

# 通信数据转发程序

## 代理

一种有转发功能的应用程序。

基本行为就是接收客户端发送的请求后转发给其他服务器。

### 缓存代理

预先将资源的副本（缓存）保存在代理服务器上。当代理再次接收到对相同资源的请求时，将之前缓存的资源作为响应返回。

### 透明代理

不对报文做任何加工

## 网关

网关是转发其他服务器通信数据的服务器。能使通信线路上的服务器提供非 HTTP 协议服务。提高通信的安全性。

## 隧道

隧道是在相隔甚远的客户端和服务器两者之间进行中转，并保持双方通信连接的应用程序。

可按要求建立起一条与其他服务器的通信线路，使用加密手段进行通信。

# 缓存

代理服务器或客户端本地磁盘内保存的资源副本。利用缓存可减少对源服务器的访问，因此也就节省了通信流量和通信时间。

# 安全

由于HTTP本身不具备加密的功能，所以也无法做到对通信整体进行加密。

## HTTPS

通过和 SSL或TLS的组合使用，加密 HTTP 的通信内容。

与SSL组合使用的HTTP被称为 HTTPS（HTTP Secure，超文本传输安全协议）或HTTP over SSL。

通常，HTTP直接和TCP通信。当使用SSL时，先和SSL通信，再由SSL和TCP通信了。

SSL采用一种叫做公开密钥加密（Public-key cryptography）的加密处理方式。














